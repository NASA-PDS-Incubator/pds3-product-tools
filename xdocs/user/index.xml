<?xml version="1.0" encoding="UTF-8"?>

<!--
Copyright 2006-2007, by the California Institute of Technology.
ALL RIGHTS RESERVED. United States Government Sponsorship acknowledged.
Any commercial use must be negotiated with the Office of Technology Transfer
at the California Institute of Technology.

This software is subject to U. S. export control laws and regulations
(22 C.F.R. 120-130 and 15 C.F.R. 730-774). To the extent that the software
is subject to U.S. export control laws and regulations, the recipient has
the responsibility to obtain export licenses or other export authority as
may be required before exporting such information to foreign countries or
providing access to foreign nationals.

$Id: index.xml 1157 2006-06-16 19:50:08Z shardman $
-->

<document>
  <properties>
    <title>Use and Operation</title>
    <author email="Michael.Cayanan@jpl.nasa.gov">Michael Cayanan</author>
    <author email="Sean.Hardman@jpl.nasa.gov">Sean Hardman</author>
  </properties>

  <body>
    <section name="Overview">
      <p>The goal of the Validation Tool (VTool) is to programmatically ascertain if a given data product is PDS compliant (or "valid"). Typically, this means the data product is well formed, complete, syntactically and semantically correct, and that it conforms to all applicable PDS standards. The standards themselves are defined in the <a href="http://pds.nasa.gov/documents/sr/" target="_blank">PDS Standards Reference</a>.
      </p>
      
      <p>This section describes how to use VTool in order to perform automated validation of data products. The following topics can be found in this section:
      </p>

      <ul>
        <li><a href="#Tool Setup">Tool Setup</a></li>
        <li><a href="#Tool Execution">Tool Execution</a></li>
        <li><a href="#Report Formats">Report Formats</a></li>
        <li><a href="#Common Errors">Common Errors</a></li>
      </ul>
    
      <p>Note: The command-line examples in this section have been broken into multiple lines for readability. The commands should be reassembled into a single line prior to execution.
      </p>
    </section>
      
    <section name="Tool Setup">
      <p>In order to execute VTool, the user's environment must first be configured appropriately. This section describes how to setup the user environment on UNIX-based and Windows machines.
      </p>
      
      <subsection name="UNIX-Based Setup">
        <p>This section details the environment setup for UNIX-based machines providing four different methods:
        </p>

        <ul>
          <li>Specify the Shell Script on the Command-Line</li>
          <li>Set the CLASSPATH Environment Variable</li>
          <li>Specify the CLASSPATH on the Command-Line</li>
          <li>Specify the Jar on the Command-Line</li>
        </ul>
        
        <p><b><i>Specify the Shell Script on the Command-Line</i></b></p>
        <p>The preferred method is to specify the shell script, <i>VTool</i>, on the command-line. After modifying the script as described in the <a href="../install/index.html" target="_blank">Modifying Shell Scripts</a> section, set the <i>PATH</i> environment variable to the location of the script. This enables the shell script to be executed from any location in the user machine.
        </p>
        
        <p>The following command demonstrates how to set the <i>PATH</i> environment variable, by appending to its current setting. The example contains <i>X.X.X</i>, which represents the current version of the <i>product-tools</i> package.
        </p>
        
        <source>
[node:~] setenv PATH ${PATH}:\
$HOME/product-tools-X.X.X/scripts
        </source>        
        
        <p>The tool can now be executed via the shell script as demonstrated in the following example:
        </p>
        
        <source>
[node:~] VTool &lt;command-line arguments&gt;
        </source>
        
        <p><b><i>Set the CLASSPATH Environment Variable</i></b></p>
        <p>An alternative method is to set the <i>CLASSPATH</i> environment variable. The following commands demonstrate how to set this variable, by appending to its current setting. The example contains <i>X.X.X</i>, which represents the current version of the <i>product-tools</i> package.
        </p>

        <p>The first example and preferred method for setting the variable, appends the executable jar file found in the <i>bin</i> directory:
        </p>

        <source>
[node:~] setenv CLASSPATH ${CLASSPATH}:\
$HOME/product-tools-X.X.X/bin/product-tools-X.X.X-app.jar

[node:~] echo $CLASSPATH
        </source>

        <p>The second example separately appends the dependent jar files, found in the <i>lib</i> directory:
        </p>

        <source>
[node:~] setenv CLASSPATH ${CLASSPATH}:\
$HOME/product-tools-X.X.X/lib/antlr-2.7.6.jar:\
$HOME/product-tools-X.X.X/lib/commons-cli-1.0.jar:\
$HOME/product-tools-X.X.X/lib/commons-collections-3.1.jar:\
$HOME/product-tools-X.X.X/lib/commons-configuration-1.2.jar:\
$HOME/product-tools-X.X.X/lib/commons-io-1.2.jar:\
$HOME/product-tools-X.X.X/lib/commons-lang-2.1.jar:\
$HOME/product-tools-X.X.X/lib/commons-logging-1.0.3.jar:\
$HOME/product-tools-X.X.X/lib/product-tools-X.X.X.jar

[node:~] echo $CLASSPATH
        </source>

        <p>The second command in both of the examples above, will display the current value of the <i>CLASSPATH</i> variable. Please note that the value for the <i>CLASSPATH</i> variable may not contain space characters. Once the <i>CLASSPATH</i> is set, the tool can be executed with the following command:
        </p>

        <source>
[node:~] java gov.nasa.pds.tools.VTool &lt;command-line arguments&gt;
        </source>

        <p><b><i>Specify the CLASSPATH on the Command-Line</i></b></p>
        <p>An alternative method to setting the <i>CLASSPATH</i> variable is to specify the <i>java.ext.dirs</i> Java property on the command-line when running the tool each time. This is done by passing the property via the Java "-D" flag as demonstrated in the following example:
        </p>

        <source>
[node:~] java -Djava.ext.dirs=$HOME/product-tools-X.X.X/lib \
gov.nasa.pds.tools.VTool &lt;command-line arguments&gt;
        </source>

        <p><b><i>Specify the Jar on the Command-Line</i></b></p>
        <p>Another alternative method is to specify the executable jar file on the command-line when running the tool each time. This is done by passing the jar file specification via the Java "-jar" flag as demonstrated in the following example:
        </p>

        <source>
[node:~] java -jar \
$HOME/product-tools-X.X.X/bin/product-tools-X.X.X-app.jar \
&lt;command-line arguments&gt;
        </source>
      </subsection>
      
      <subsection name="Windows Setup">
        <p>This section details the environment setup for Windows machines providing four different methods:
        </p>

        <ul>
          <li>Specify the Batch File on the Command-Line</li>
          <li>Set the CLASSPATH Environment Variable</li>
          <li>Specify the CLASSPATH on the Command-Line</li>
          <li>Specify the Jar on the Command-Line</li>
        </ul>

        <p><b><i>Specify the Batch File on the Command-Line</i></b></p>
        <p>The preferred method is to specify the batch file, <i>VTool.bat</i>, on the command-line. After modifying the batch file as described in the <a href="../install/index.html" target="_blank">Modifying Shell Scripts</a> section, set the <i>PATH</i> environment variable to the location of the file. This enables the batch to be executed from any location in the user machine.
        </p>
        
        <p>The following command demonstrates how to set the <i>PATH</i> environment variable, by appending to its current setting. The example contains <i>X.X.X</i>, which represents the current version of the <i>product-tools</i> package.
        </p>
        
        <source>
C:\&gt; set PATH = %PATH%;\
C:\product-tools-X.X.X\scripts
        </source>       
        
        <p>The tool can now be executed via the batch file as demonstrated in the following example:
        </p>
        
        <source>
C:\&gt; VTool &lt;command-line arguments&gt;
        </source>

        <p><b><i>Set the CLASSPATH Environment Variable</i></b></p>
        <p>An alternative method is to set the <i>CLASSPATH</i> environment variable. The following commands demonstrate how to set this variable, by appending to its current setting. The example contains <i>X.X.X</i>, which represents the current version of the <i>product-tools</i> package.
        </p>

        <p>The first example and preferred method for setting the variable, appends the executable jar file found in the <i>bin</i> directory:
        </p>

        <source>
C:\&gt; set CLASSPATH=%CLASSPATH%;\
c:\product-tools-X.X.X\bin\product-tools-X.X.X-app.jar

C:\&gt; echo %CLASSPATH%
        </source>

        <p>The second example separately appends the dependent jar files, found in the <i>lib</i> directory:
        </p>

        <source>
C:\&gt; set CLASSPATH=%CLASSPATH%;\
c:\product-tools-X.X.X\lib\antlr-2.7.6.jar;\
c:\product-tools-X.X.X\lib\commons-cli-1.0.jar;\
c:\product-tools-X.X.X\lib\commons-collections-3.1.jar;\
c:\product-tools-X.X.X\lib\commons-configuration-1.2.jar;\
c:\product-tools-X.X.X\lib\commons-io-1.2.jar;\
c:\product-tools-X.X.X\lib\commons-lang-2.1.jar;\
c:\product-tools-X.X.X\lib\commons-logging-1.0.3.jar;\
c:\product-tools-X.X.X\lib\product-tools-X.X.X.jar

C:\&gt; echo %CLASSPATH%
        </source>

        <p>The second command in both of the examples above, will display the current value of the <i>CLASSPATH</i> variable. Please note that the value for the <i>CLASSPATH</i> variable may not contain space characters. Once the <i>CLASSPATH</i> is set, the tool can be executed with the following command:
        </p>

        <source>
C:\&gt; java gov.nasa.pds.tools.VTool &lt;command-line arguments&gt;
        </source>

        <p>Another way of setting the CLASSPATH is through the "Settings/Control Panel/System" method. Documentation on this method can be found <a href="documents/Windows_GUI_Setup.doc">here</a>.
        </p>

        <p><b><i>Specify the CLASSPATH on the Command-Line</i></b></p>
        <p>An alternative method to setting the <i>CLASSPATH</i> variable is to specify the <i>java.ext.dirs</i> Java property on the command-line when running the tool each time. This is done by passing the property via the Java "-D" flag as demonstrated in the following example:
        </p>

        <source>
C:\&gt; java -Djava.ext.dirs=c:\product-tools-X.X.X\lib \
gov.nasa.pds.tools.VTool &lt;command-line arguments&gt;
        </source>

        <p><b><i>Specify the Jar on the Command-Line</i></b></p>
        <p>Another alternative method is to specify the executable jar file on the command-line when running the tool each time. This is done by passing the jar file specification via the Java "-jar" flag as demonstrated in the following example:
        </p>

        <source>
C:\&gt; java -jar \
c:\product-tools-X.X.X\bin\product-tools-X.X.X-app.jar \
&lt;command-line arguments&gt;
        </source>
      </subsection>
    </section>

    <section name="Tool Execution">
      <p>VTool can be executed in various ways. This section describes how to run VTool and how to generate reports, as well as the behaviors and caveats of the tool.
      </p>
          
      <subsection name="Command-Line Options">
        <p>The following table contains command-line options available to VTool:
        </p>

        <table>
          <tr><th colspan="2">VTool Command-Line Options</th></tr>
          <tr><td nowrap="nowrap">-t, --target &lt;labels,URLs,dirs&gt;</td><td>Explicitly specify the targets (label files, directories, and URLs) to validate. Targets can be specified implicitly as well (example: VTool label.lbl). For more details on target specification, see the <a href="#Specifying Targets">Specifying Targets</a> section.</td></tr>
          <tr><td>-d, --dict &lt;.full files&gt;</td><td>Specify the Planetary Science Data Dictionary full file name and any local dictionaries.</td></tr>
          <tr><td>-l, --log-file &lt;file (optional)&gt;</td><td>Specify the file name for the machine-readable log. A file specification is optional. If no file name is given, then the log will be written to standard out. For more details on writing the log to a file, see the <a href="#Report and Log Generation">Report and Log Generation</a> section.</td></tr>
          <tr><td>-r, --report-file &lt;file&gt;</td><td>Specify the file name for the human-readable report. Default is to write to the standard out if this flag is not specified. This report, however, will not print to standard out if this flag is missing AND the log file flag is specified with no file name. For more details on how to create reports, see the <a href="#Report and Log Generation">Report and Log Generation</a> section</td></tr>
          <tr><td>-s, --report-style</td><td>Specify the standard human-readable report format. Valid values are "full" for a full view, "min" for a minimal view, or "sum" for a summary view. Default is to generate a full report if this flag is not specified. for more details on these report styles, see the <a href="#Report Formats">Report Formats</a> section</td></tr>
          <tr><td>-v, --verbose</td><td>Specify the message severity level and above to include in the human-readable report (1=Info, 2=Warning, 3=Error). Default is warning and above (level 2).</td></tr>
          <tr><td>-I, --include &lt;paths&gt;</td><td>Specify paths to search for files referenced by pointers in a label. Separate each path with a space. Default is to always look in the directory of the label, then search the specified directories.</td></tr>
          <tr><td>-F, --no-follow</td><td>Do not follow or check for the existence of files referenced by pointer statements in a label.</td></tr>
          <tr><td>-f, --force</td><td>Enable standalone label fragment validation. Default is to not validate them.</td></tr>
          <tr><td>-c, --config &lt;file&gt;</td><td>Specify a configuration file to set the default values for VTool.</td></tr>
          <tr><td>-L, --local</td><td>Validate files only in the input directory rather than recursively traversing down the sub-directories.</td></tr>
          <tr><td nowrap="nowrap">-e, --regexp &lt;expressions&gt;</td><td>Specify file patterns to look for when validating a directory. Separate each pattern with a space. Patterns should be surrounded in quotes ("*.LBL *.FMT" or "*.LBL" "*.FMT") to avoid having the system shell mistakingly interpreting them (This has been seen on non-Windows systems). Pattern matching is case-insensitive in Windows, but case-sensitive for other systems.
          </td></tr>
          <tr><td nowrap="nowrap">-X, --ignore-file &lt;expressions&gt;</td><td>Specify file patterns to ignore when validating a directory. Separate each pattern with a space. Patterns should be surrounded in quotes ("*.TXT *.TAB" or "*.TXT" "*.TAB") to avoid having the system shell mistakingly interpreting them (This has been seen on non-Windows systems). Pattern matching is case-insensitive in Windows, but case-sensitive for other systems.
          </td></tr>
          <tr><td nowrap="nowrap">-D, --ignore-dir &lt;expressions&gt;</td><td>Specify the directory patterns to ignore. Separate each pattern with a space. Patterns should be surrounded by quotes ("LABEL EXTRAS" or "LABEL" "EXTRAS") to avoid having the system shell mistakingly interpreting them (This has been seen on non-Windows systems). Pattern matching is case-insensitive in Windows, but case-sensitive for other systems.
          </td></tr>
          <tr><td>-p, --progress</td><td>Enable validation progress reporting. Default is no. When this option is enabled, the current directory being validated will be written to standard error, followed by a series of asterisk "*" symbols, which represents a file being validated.</td></tr>
          <tr><td>-h, --help</td><td>Display VTool usage.</td></tr>
          <tr><td>-V, --version</td><td>Display VTool version.</td></tr>
        </table>
      </subsection> 
      
      <subsection name="Running VTool">
        <p>This section demonstrates some of the ways that the tool can be executed using the command-line option flags:
        </p>
        
         <ul>
          <li>Validating Against a Single Dictionary</li>
          <li>Validating Against Multiple Dictionaries</li>
          <li>Validating Files with a Specific File Pattern</li>
          <li>Ignoring Sub-Directories During Validation</li>
          <li>Ignoring Files with a Specific File Pattern</li>
          <li>Checking For Referenced Files in Different Locations</li>
          <li>Not Following a Pointer</li>
          <li>Standalone Label Fragment Validation</li>
          <li>Progress Reporting</li>
          <li>Changing Tool Behaviors With The Configuration File</li>
        </ul>

        <p>Note: The command-line examples below are executing VTool via the batch/shell script. Alternatively, the <i>java -jar</i> or <i>java gov.nasa.pds.tools.VTool</i> command can be used to execute the tool as mentioned in the <a href="#Tool Setup">Tool Setup</a> section. Make sure the user environment is configured properly prior to the preferred method of calling the tool.
        </p>
        
        <p><b><i>Validating Against a Single Dictionary</i></b></p>
        
        <p>The following command demonstrates the validation of a single data product label against the PSDD:
        </p>
        
        <source>
[node:~] VTool LABEL.LBL \
-d pdsdd.full 
        </source>       
        
        <p>If there is a dictionary error, the tool will not perform label validation.</p>
        
        <p><b><i>Validating Against Multiple Dictionaries</i></b></p>
        
        <p>The following command demonstrates the validation of a single data product label against the PSDD and a local dictionary:
        </p>
        <source>
[node:~] VTool LABEL.LBL \
-d pdsdd.full localdd.full 
        </source>

        <p>For more information on how the tool behaves when multiple dictionaries are passed in, see the <a href="#Multiple Dictionary Support">Multiple Dictionary Support</a> section.
        </p>

        <p><b><i>Validating Files with a Specific File Pattern</i></b></p>

        <p>The following command demonstrates the validation of multiple data product labels in a specified target directory, where validation only occurs on file names that end in ".LBL" or begins with the letters "MER":
        </p>
        <source>
[node:~] VTool $HOME/DIR \
-d pdsdd.full -e "*.LBL" "MER*"
        </source>

        <p><b><i>Ignoring Sub-Directories During Validation</i></b></p>
        
        <p>By default, the tool will recursively traverse down a directory tree when a target directory is specified, validating files within the sub-directories. Sub-directories can be ignored with the ignore directories flag.
        </p>
        
        <p>The following command demonstrates the validation of multiple data product labels in a specified target directory, where directories named "EXTRAS" or "LABEL" are ignored.
        </p>
        <source>
[node:~] VTool $HOME/DIR \
-d pdsdd.full -D "EXTRAS" "LABEL"
        </source>        
        
        <p>The local flag can also be used to stop the tool from recursing down a directory tree.
        </p>
        
        <p>The following command demonstrates the same validation as above, but without recursion:
        </p>
        <source>
[node:~] VTool $HOME/DIR \
-d pdsdd.full -L
        </source>

        <p><b><i>Ignoring Files with a Specific File Pattern</i></b></p>

        <p>The ignore files flag can be used to tell the tool which files to ignore during validation.
        </p>

        <p>The following command demonstrates the validation of multiple data product labels contained in a directory except for files ending in a ".IMG" or ".TAB":
        </p>
        <source>
[node:~] VTool $HOME/DIR \
-d pdsdd.full -X "*IMG" "*TAB"
        </source>
        
        <p><b><i>Checking For Referenced Files in Different Locations</i></b></p>
        
        <p>If a data product label contains a pointer statement that references a file, it will always assume it is co-located with the label. If it cannot be found there, then VTool will look for that referenced file in the paths specified by the include directories option.
        </p>
        
        <p>The following command demonstrates the validation of a data product label that contains a pointer statement to a file located in a directory called DIR.
        </p>
        <source>
[node:~] VTool LABELPTR.LBL \
-d pdsdd.full -I $HOME/path
        </source>
        
        <p>If the data product label contains pointer statements that reference files located in two different locations, then multiple paths can be specified.
        </p>
        
        <p>The following command demonstrates the validation of a data product label that contains pointer statements that reference files located in two different locations, path1 and path2.
        </p>
        <source>
[node:~] VTool LABELPTR2.LBL \
-d pdsdd.full -I $HOME/path1 $HOME/path2
        </source>
        
        <p><b><i>Not Following a Pointer</i></b></p>
        
        <p>If a data product label points to a label fragment, VTool has the capability of validating this label without having to validate the associated label fragment with the no follow pointers option. This would be used in cases where the label fragment is not complete or in cases where the user wishes to simply check that the parent label structure is PDS compliant.
        </p>
        
        <p>The following command demonstrates the validation of a data product label that contains a label fragment, but specifying to the tool to not follow the pointer:
        </p>
        <source>
[node:~] VTool LABEL.LBL \
-d pdsdd.full -F
        </source>
        
        <p><b><i>Standalone Label Fragment Validation</i></b></p>
        
        <p>The force flag is used to force standalone label fragment validation. When this flag is specified, standalone label fragment validation will occur on files whose extension ends in a .FMT
        </p>
        
        <p>The following command demonstrates the validation of multiple data products, including performing standalone label fragment validation on any files it finds with a .FMT extension:
        </p>
        <source>
[node:~] VTool $HOME/DIR \
-d pdsdd.full -f
        </source>         
        
        <p><b><i>Progress Reporting</i></b></p>
        
        <p>Validation progress reporting is enabled with the progress flag. With progress reporting enabled, VTool will print, to the standard error, the current location that is being validated followed by a series of asterisk "*" symbols that represents a file it has encountered. The default behavior is to have this feature disabled.
        </p>
        
        <p>The following command demonstrates the validation of multiple data products found in a directory, <i>DIR</i>, and its sub-directories with progress reporting enabled.
        </p>
        
        <source>
[node:~] VTool /home/user/DIR \
-d pdsdd.full -p
        </source>
        
        <p>The progress reporting would look something like the following:
        </p>
        
        <source>
Validating file(s) in: file:/home/user/DIR
*
Validating file(s) in: file:/home/user/DIR/subDir1
*****
Validating file(s) in: file:/home/user/DIR/subDir2
***

...
        </source>
        
        <p>In the above example, 1 file was validated in the DIR directory, 5 files were validated in DIR/subDir1, and 3 files were validated in DIR/subDir2.
        </p>
                
        <p><b><i>Changing Tool Behaviors With The Configuration File</i></b></p>
        
        <p>A configuration file can be passed into the command-line to change the default behaviors of the tool and to also provide users a way to perform validation with a single flag. For more details on how to setup the configuration file, see the <a href="#Using a Configuration File">Using a Configuration File</a> section.
        </p>
        
        <p>The following command demonstrates performing validation using a configuration file:
        </p>
        <source>
[node:~] VTool -c config.txt
        </source>
      </subsection>
      
      <subsection name="Specifying Targets">
        <p>Targets are validated in the order in which they are specified on the command-line. They can be specified implicitly and explicitly.
        </p>
        
        <p>To specify targets implicitly, it is best to specify them first on the command-line before any other option flags.
        </p>
        
        <p>The following command demonstrates the validation of a single data product label, specified implicitly, against the PSDD:
        </p>
        <source>
[node:~] VTool LABEL.LBL \
-d pdsdd.full
        </source>        
        
        <p>The following command demonstrates the validation of multiple data product labels, both specified implicitly, against the PSDD:
        </p>
        <source>
[node:~] VTool LABEL.LBL $HOME/DIR \
-d pdsdd.full
        </source>
        
        <p><b>Implicit targets should not be specified after option flags that allow multiple arguments (see example below). Unexpected results will occur.</b>
        </p>
        <source>
[node:~] VTool -d pdsdd.full \
LABEL.LBL
        </source>         
        
        <p>In this example, VTool will inadvertently treat the implicit target, <i>LABEL.LBL</i>, as a dictionary file.</p>
        
        <p>Targets can be specified both implicitly and explicitly at the same time. Targets specified implicitly are validated first, followed by those that are specified explicitly with the target flag.
        </p>
        
        <p>The following command demonstrates the validation of multiple data product labels, specified both implicitly and explicitly, against the PSDD:
        </p> 
        
        <source>
[node:~] VTool LABEL1.LBL \
LABEL2.LBL -d pdsdd.full -t LABEL3.LBL $HOME/DIR
        </source>            
        
        <p>In this example, LABEL1.LBL and LABEL2.LBL will get validated first, then LABEL3.LBL and the labels in $HOME/DIR will get validated next.
        </p>
      </subsection>
        
      <subsection name="Report and Log Generation">
        <p>This section describes how to generate a human-readable report and machine-readable log. This is done in the following ways:
        </p>
        
        <ul>
          <li>Writing a Human-Readable Report to File</li>
          <li>Writing a Human-Readble Report to Standard Out</li>
          <li>Validating Files with a Specific File Pattern</li>
          <li>Writing the Machine-Readable Log to Standard Out with No Human-Readable Report</li>
          <li>Writing the Machine-Readable Log to File, Writing the Human-Readable Report to Standard Out</li>
          <li>Writing Both the Machine-Readable Log and Human-Readable Report to File</li>
        </ul>        
        
        <p><b><i>Writing a Human-Readable Report to File</i></b></p>
        
        <p>Specify the report file flag to write the human-readable report to file. The report style flag is used to specify the report format. If the style flag is not specified, the default is to show a full report.
        </p>
                
        <p>The following command demonstrates writing the human-readable, full report to a file named <i>report.txt</i>:
        </p>
        <source>
[node:~] VTool LABEL.LBL \
-d pdsdd.full -r report.txt
        </source>

        <p><b><i>Writing a Human-Readble Report to Standard Out</i></b></p>

        <p>Do not specify the report file flag to write the human-readable report to file.
        </p>
        
        <p>The following command demonstrates the validation of a single data product label against the PSDD, where the human-readable, full report is written to standard out:
        </p>
        <source>
[node:~] VTool LABEL.LBL \
-d pdsdd.full
        </source>
        
        <p>In the above examples, the machine-readable log is written to memory. The examples below will demonstrate how to see the machine-readable log.
        </p>
        
        <p><b><i>Writing the Machine-Readable Log to Standard Out with No Human-Readable Report</i></b></p>
        <p>Use the log file flag <i>with no file specification</i> and do not specify the report file flag.
        </p>
  
        <p>The following command demonstrates writing the machine-readable log to standard out with no human-readable report generated:
        </p>       
        <source>
[node:~] VTool LABEL.LBL \
-d pdsdd.full -l
        </source>
        
        <p><b><i>Writing the Machine-Readable Log to File, Writing the Human-Readable Report to Standard Out</i></b></p>
        
        <p>Specify the report file flag and the log file flag <i>with a file name specification</i>.
        </p>
        
        <p>Note: When a directory is being validated and the log will be written to a file, the log should be written to a location different from the target directory. Otherwise, the tool will attempt to validate the log and it will be seen in the report.
        </p>       
        
        <p>The following command demonstrates writing the machine-readable log to a file named <i>log.xml</i> and writing a human-readable, full report to standard out.
        </p>        
        <source>
[node:~] VTool LABEL.LBL \
-d pdsdd.full -l log.xml
        </source>
        
        <p><b><i>Writing Both the Machine-Readable Log and Human-Readable Report to File</i></b></p>
        
        <p>Specify the report file flag and the log file flag with a file specification. The file names should be different. The log and report cannot be written to the same file.
        </p>

        <p>The following command demonstrates writing the machine-readable log to a file named <i>log.xml</i> and writing the human-readable report to a file named <i>report.txt</i>
        </p>       
        <source>
[node:~] VTool LABEL.LBL \
-d pdsdd.full -l log.xml -r report.txt
        </source>   

        <p><b><i>Writing the Machine-Readable Log to Standard Out, Writing the Human-Readable Report to File</i></b></p>

        <p>Specify the report file flag and the log file flag with no file specification.
        </p>
        
        <p>The following command demonstrates writing the machine-readable log to standard out and writing the human-readable report to a file named <i>report.txt</i>
        </p>       
        <source>
[node:~] VTool LABEL.LBL \
-d pdsdd.full -l -r report.txt
        </source>        
      </subsection>
      
      <subsection name="Multiple Dictionary Support">
        <p>VTool allows multiple dictionary files to be passed in through the command-line via the "-d" flag. When passing in multiple dictionaries, element and object definitions found in the dictionaries are merged together internally. In the case where definitions are found to be identical in each of the dictionary files being passed in, the definition found in the dictionary file specified LAST on the command-line will be retained.
        </p>
        
        <p>The following example demonstrates the VTool behavior when passing in two dictionary files:</p>
        
        <p>Suppose a PSDD, pdsdd.full, and a local dictionary, local-dd1.full, is being passed into VTool, where the PSDD contains the following DATA_SET_ID definition:</p>
        <source>
OBJECT = ELEMENT_DEFINITION
  NAME = DATA_SET_ID
  STATUS_TYPE = APPROVED
  GENERAL_DATA_TYPE = IDENTIFIER
  UNIT_ID = NONE
  STANDARD_VALUE_TYPE = FORMATION
  MAXIMUM_LENGTH = 40
  DESCRIPTION = "
     The data_set_id element is a unique
     alphanumeric identifier for a data set or a data product.
     The data_set_id value for a given data set or
     product is constructed according to flight project
     naming conventions.  In most cases the data_set_id is an
     abbreviation of the data_set_name.
     Example value: MR9/VO1/VO2-M-ISS/VIS-5-CLOUD-V1.0.
     Note:  In the PDS, the values for both data_set_id and
     data_set_name are constructed according to standards
     outlined in the Standards Reference."
  STANDARD_VALUE_SET = {
     "A-5-DDR-ASTERMAG-V1.0",
     "A-5-DDR-ASTEROID-SPIN-VECTORS-V3.0",
     "A-5-DDR-ASTNAMES-V1.0",
     "A-5-DDR-POLE-POSITION-REF-V1.0",
     "A-5-DDR-POLE-POSITION-V1.0",
     "A-5-DDR-TAXONOMY-V1.0",
     "ARCB-L-RTLS-3-70CM-V1.0",
     "ARCB-L-RTLS-4-70CM-V1.0",
     ....
     }
END_OBJECT = ELEMENT_DEFINITION
END
        </source>
          
        <p>and the local dictionary also contains DATA_SET_ID, but with a different set of standard values:</p>
        <source>
OBJECT = ELEMENT_DEFINITION
  NAME = DATA_SET_ID
  STATUS_TYPE = APPROVED
  GENERAL_DATA_TYPE = IDENTIFIER
  UNIT_ID = NONE
  STANDARD_VALUE_TYPE = FORMATION
  MAXIMUM_LENGTH = 40
  DESCRIPTION = "
     The data_set_id element is a unique
     alphanumeric identifier for a data set or a data product.
     The data_set_id value for a given data set or
     product is constructed according to flight project
     naming conventions.  In most cases the data_set_id is an
     abbreviation of the data_set_name.
     Example value: MR9/VO1/VO2-M-ISS/VIS-5-CLOUD-V1.0.
     Note:  In the PDS, the values for both data_set_id and
     data_set_name are constructed according to standards
     outlined in the Standards Reference."
  STANDARD_VALUE_SET = {
     "VENUS"
     "EARTH"
  }
END_OBJECT = ELEMENT_DEFINITION
END
        </source>
                 
        <p>If the PSDD is passed in first followed by the local dictionary as follows:</p>
        <source>
... -d pdsdd.full local-dd1.full ...
        </source>
        
        <p>VTool will retain the DATA_SET_ID definition found in the local dictionary.</p>
        
        <p>If the local dictionary is passed in first followed by the PSDD as follows:</p>
        <source>
... -d local-dd1.full pdsdd.full ...
        </source>
        
        <p>VTool will retain the DATA_SET_ID definition found in the PSDD.</p>
        
        <p>The following example demonstrates the VTool behavior when passing in three dictionaries: </p>

        <p>Suppose the PSDD and the local dictionary, local-dd1.full, file have the DATA_SET_ID definition as stated above. In addition, there is another local dictionary, local-dd2.full, that will be passed into VTool also, which contains the following DATA_SET_ID definition:
        </p>
        <source>
OBJECT = ELEMENT_DEFINITION
  NAME = DATA_SET_ID
  STATUS_TYPE = APPROVED
  GENERAL_DATA_TYPE = IDENTIFIER
  UNIT_ID = NONE
  STANDARD_VALUE_TYPE = FORMATION
  MAXIMUM_LENGTH = 40
  DESCRIPTION = "
     The data_set_id element is a unique
     alphanumeric identifier for a data set or a data product.
     The data_set_id value for a given data set or
     product is constructed according to flight project
     naming conventions.  In most cases the data_set_id is an
     abbreviation of the data_set_name.
     Example value: MR9/VO1/VO2-M-ISS/VIS-5-CLOUD-V1.0.
     Note:  In the PDS, the values for both data_set_id and
     data_set_name are constructed according to standards
     outlined in the Standards Reference."
  STANDARD_VALUE_SET = {
     "MARS"
     "JUPITER"
  }
END_OBJECT = ELEMENT_DEFINITION
END
        </source>
          
        <p>If these three dictionaries get passed into VTool as follows:</p>
        <source>
... -d pdsdd.full local-dd1.full local-dd2.full ...
        </source>
          
        <p>VTool will retain the DATA_SET_ID definition found in the last dictionary specified. In this case, it is the definition found in local-dd2.full.
        </p>
        
        <p>If these dictionaries get passed into VTool in some other order like the following:</p>
        <source>
... -d local-dd2.full local-dd1.full pdsdd.full ...
        </source>
          
        <p>VTool will retain the DATA_SET_ID definition found in pdsdd.full.</p>          
      </subsection>
              
      <subsection name="Using a Configuration File">
        <p>A configuration file is used to set the default behaviors of the tool. It consists of a text file made up of keyword/value pairs. The configuration file follows the syntax of the stream parsed by the Java Properties.load(java.io.InputStream) method.
        </p>
        
        <p>Blank lines and lines which begin with the hash character "#" are ignored.
        </p>
        
        <p>Values may be separated on different lines if a backslash is placed at the end of the line that continues below.
        </p>
        
        <p>Escape sequences for special characters like a line feed, a tabulation or a unicode character, are allowed in the values and are specified in the same notation as those used in Java strings (e.g. \n, \t, \r).
        </p>
        
        <p>Since backslashes (\) have special meanings in a configuration file, keyword values that contain this character will not be interpreted properly by VTool even if it is surrounded by quotes. A common example would be a Windows path name (e.g. c:\VTT_EN_1-1\target). Use the forward slash character instead (c:/VTT_EN_1-1/target) or escape the backslash character (c:\\VTT_EN_1-1\\target).
        </p>
        
        <p>Note: Any flag specified on the command-line takes precedence over any equivalent settings placed in the configuration file.
        </p>
            
        <p>The following table contains valid keywords that can be specified in the configuration file:</p>

        <table>
          <tr><th>KEYWORD</th><th>ASSOCIATED FLAG</th><th>valid value(s)</th></tr>
          <tr><td>vtool.target</td><td>-t</td><td>Specify labels,directories, and URLs</td></tr>
          <tr><td>vtool.dict</td><td>-d</td><td>Specify dictionary files</td></tr>
          <tr><td>vtool.log</td><td nowrap="nowrap">-l</td><td>To write the log to standard out, set to 'true'. To write the log to a file, set to a file name. Otherwise, do not specify this keyword at all (or simply set to 'false').</td></tr>
          <tr><td>vtool.report</td><td>-r</td><td>Specify the human-readable report file name (do not specify keyword if wanting to write to standard out)</td></tr>
          <tr><td>vtool.style</td><td>-s</td><td>Specify the standard human-readable report format ("full", "min", or "sum"). If not specified, then a full report will be generated</td></tr>
          <tr><td>vtool.verbose</td><td>-v</td><td>Specify the message severity level and above to include in the human-readable report(1=Info, 2=Warning, 3=Error). Default is warning and above (level 2).</td></tr>
          <tr><td nowrap="nowrap">vtool.includepaths</td><td>-I</td><td>Specify paths to search for files refererenced by pointers in a label</td></tr>
          <tr><td>vtool.follow</td><td>-F</td><td>Set to 'false' to not look for files referenced by pointer statements in a label, set to 'true' otherwise</td></tr>
          <tr><td>vtool.force</td><td>-f</td><td>Set to 'true' to enable standalone label fragment validation, 'false' otherwise</td></tr>
          <tr><td>vtool.recursive</td><td>-L</td><td>Set to 'false' to not traverse a directory, set to 'true' otherwise</td></tr>
          <tr><td>vtool.regexp</td><td>-e</td><td>Specify file patterns to search for when validating a directory.</td></tr>
          <tr><td>vtool.ignorefile</td><td>-X</td><td>Specify file patterns to ignore when validating a directory.</td></tr>
          <tr><td>vtool.ignoredir</td><td>-D</td><td>Specify directory patterns to ignore.</td></tr>
          <tr><td>vtool.progress</td><td>-p</td><td>Set to 'true' to enable progress reporting, 'false' otherwise.</td></tr>
        </table>

        <p>The following example demonstrates how to set a configuration file:</p>
        <source>
# This is a VTool configuration file          

vtool.target = ./TEST_DIR
vtool.dict = pdsdd.full
vtool.log = log.xml
vtool.report = rpt.txt
vtool.recursive = false
vtool.includepaths = /home/path
vtool.regexp = "*.LBL"
        </source>

        <p>This is equivalent to running the tool with the following flags:</p>
        <source>
-t ./TEST_DIR -d pdsdd.full -l log.xml -L -e "*.LBL" \
-I /home/path -r rpt.txt
        </source>          

        <p>The following example demonstrates how to set a configuration file with multiple values for a keyword:
        </p>
        <source>
# This is a VTool configuration file with multiple values

vtool.target = TEST.LBL ./TEST_DIR
vtool.dict = pdsdd.full localdd.full
vtool.recursive = true
vtool.includepaths = /home/path1 /home/path2
vtool.regexp = "*.LBL" "*.FMT"
        </source>

        <p>This is equivalent to running the tool with the following flags:</p>
        <source>
-t TEST.LBL ./TEST_DIR -d pdsdd.full localdd.full \
-e "*.LBL" "*.FMT" -I /home/path1 /home/path2
        </source>

        <p>The following example demonstrates how to set a configuration file with multiple values that span across multiple lines:
        </p>
        <source>
# This is a VTool configuration file with multiple values
# that span across multiple lines

vtool.target = TEST.LBL \
               ./TEST_DIR
vtool.dict = pdsdd.full \
             localdd.full
vtool.recursive = true
vtool.regexp = "*.LBL" \
                 "*.FMT"
        </source>
        
        <p>The following example demonstrates how to override a setting in the configuration file.</p>
        
        <p>Suppose the configuration file named config.txt is defined as follows:</p>
        <source>
# This is another VTool configuration file

vtool.target = ./TEST_DIR
vtool.dict = pdsdd.full
vtool.log = log.xml
vtool.recursive = false
vtool.regexp = "*.LBL"
        </source>
          
        <p>If validating everything in TEST_DIR is desired rather than just files that end in "LBL" as is defined in the configuration file, then the following command demonstrates how to perform this behavior:
        </p>
        <source>
[node:~] VTool -c config.txt -e "*"
        </source>
      </subsection>
      
    </section>
    
    <section name="Report Formats">
      <p>This section describes the contents of the validation report formats. The links below are meant to demonstrate how the validation results of the same run can be viewed in each format.
      </p>
      
      <p>The tool can represent a validation report in three different formats: a full, a summary , and a minimal format. The report style flag is used to change the formatting. When this flag is not specified on the command-line, the default is to generate a full report.
      </p>
        
      <subsection name="Full Reports">
        <p>In a full report, the location, severity, and textual description of each detected anomaly is reported. A 'PASS', 'FAIL', or 'SKIP' keyword is displayed next to each file to indicate when a file has passed, failed, or skipped PDS validation, respectively.
        </p>      

        <p>To see a full report, <a href="reports/rpt-full.txt" target="_blank">click here</a>.
        </p>  
      </subsection>
         
      <subsection name="Summary Reports">
        <p>In a summary report, the set of detected anomalies are summarized by reporting the number of occurrences for each type of anomaly and providing the location of one example for that anomaly.
        </p>
      
        <p>To see a summary report, <a href="reports/rpt-sum.txt" target="_blank">click here</a>.
        </p>
      </subsection>
              
      <subsection name="Minimal Reports">
        <p>In a minimal report, only the number of anomalies detected are reported for each file. The anomalies are grouped by severity level.
        </p>      

        <p>To see a minimal report, <a href="reports/rpt-min.txt" target="_blank">click here</a>.
        </p>
      </subsection>       
    </section>
    
    <section name="Common Errors">
      <p>At this point in development there is a single common error that several users have encountered. The error is as follows:
      </p>

      <source>
[node:~] java gov.nasa.pds.tools.VTool ...
Exception in thread "main" java.lang.NoClassDefFoundError:
gov/nasa/pds/tools/VTool
      </source>

      <p>The actual class name may vary but the above error is the result of the <i>CLASSPATH</i> environment variable not being set correctly. Verify that the variable contains all of the specified jar files and that there are no space characters in the value. See either the <a href="#UNIX-Based Setup">UNIX-Based Setup</a> or <a href="#Windows Setup">Windows Setup</a> section for details.
      </p>
    </section>
  </body>
</document>
